# Configuration file for the MIMIC-III schema
# Table ADMISSIONS
databaseChangeLog:
- preConditions:
  - runningAs:
      username: postgres
- changeSet:
    id: 1
    author: lcp
    changes:
    - createTable:
        tableName: ADMISSIONS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Primary key. Identifies the hospital stay.
        - column:
            name: ADMITTIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time of admission to the hospital.
        - column:
            name: DISCHTIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time of discharge from the hospital.
        - column:
            name: DEATHTIME
            type: TIMESTAMP(0)
            remarks: Time of death.
        - column:
            name: ADMISSION_TYPE
            type: VARCHAR(50)
            constraints:
              nullable: false
            remarks: Type of admission, for example emergency or elective.
        - column:
            name: ADMISSION_LOCATION
            type: VARCHAR(50)
            constraints:
              nullable: false
            remarks: Admission location.
        - column:
            name: DISCHARGE_LOCATION
            type: VARCHAR(50)
            constraints:
              nullable: false
            remarks: Discharge location
        - column:
            name: INSURANCE
            type: VARCHAR(255)
            constraints:
              nullable: false
            remarks: Insurance type.
        - column:
            name: LANGUAGE
            type: VARCHAR(10)
            remarks: Language.
        - column:
            name: RELIGION
            type: VARCHAR(50)
            remarks: Religon.
        - column:
            name: MARITAL_STATUS
            type: VARCHAR(50)
            remarks: Marital status.
        - column:
            name: ETHNICITY
            type: VARCHAR(200)
            constraints:
              nullable: false
            remarks: Ethnicity.
        - column:
            name: EDREGTIME
            type: TIMESTAMP(0)
            remarks: Time that the patient was registered from the emergency department.
        - column:
            name: EDOUTTIME
            type: TIMESTAMP(0)
            remarks: Time that the patient was discharge from the emergency department.
        - column:
            name: DIAGNOSIS
            type: VARCHAR(255)
            remarks: Diagnosis.
        - column:
            name: HOSPITAL_EXPIRE_FLAG
            type: SMALLINT
            remarks: Flag indicating that the patient has died.
        - column:
            name: HAS_CHARTEVENTS_DATA
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Hospital admission has at least one observation in the CHARTEVENTS
              table.
# Table CALLOUT
        remarks: Hospital admissions associated with an ICU stay.
- changeSet:
    id: 2
    author: lcp
    changes:
    - createTable:
        tableName: CALLOUT
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: SUBMIT_WARDID
            type: INT
            remarks: Identifies the ward where the call out request was submitted.
        - column:
            name: SUBMIT_CAREUNIT
            type: VARCHAR(15)
            remarks: If the ward where the call was submitted was an ICU, the ICU
              type is listed here.
        - column:
            name: CURR_WARDID
            type: INT
            remarks: Identifies the ward where the patient is currently residing.
        - column:
            name: CURR_CAREUNIT
            type: VARCHAR(15)
            remarks: If the ward where the patient is currently residing is an ICU,
              the ICU type is listed here.
        - column:
            name: CALLOUT_WARDID
            type: INT
            remarks: Identifies the ward where the patient is to be discharged to.
              A value of 1 indicates the first available ward. A value of 0 indicates
              home.
        - column:
            name: CALLOUT_SERVICE
            type: VARCHAR(10)
            constraints:
              nullable: false
            remarks: Identifies the service that the patient is called out to.
        - column:
            name: REQUEST_TELE
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Indicates if special precautions are required.
        - column:
            name: REQUEST_RESP
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Indicates if special precautions are required.
        - column:
            name: REQUEST_CDIFF
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Indicates if special precautions are required.
        - column:
            name: REQUEST_MRSA
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Indicates if special precautions are required.
        - column:
            name: REQUEST_VRE
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Indicates if special precautions are required.
        - column:
            name: CALLOUT_STATUS
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: Current status of the call out request.
        - column:
            name: CALLOUT_OUTCOME
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: The result of the call out request; either a cancellation or
              a discharge.
        - column:
            name: DISCHARGE_WARDID
            type: INT
            remarks: The ward to which the patient was discharged.
        - column:
            name: ACKNOWLEDGE_STATUS
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: The status of the response to the call out request.
        - column:
            name: CREATETIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time at which the call out request was created.
        - column:
            name: UPDATETIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Last time at which the call out request was updated.
        - column:
            name: ACKNOWLEDGETIME
            type: TIMESTAMP(0)
            remarks: Time at which the call out request was acknowledged.
        - column:
            name: OUTCOMETIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time at which the outcome (cancelled or discharged) occurred.
        - column:
            name: FIRSTRESERVATIONTIME
            type: TIMESTAMP(0)
            remarks: First time at which a ward was reserved for the call out request.
        - column:
            name: CURRENTRESERVATIONTIME
            type: TIMESTAMP(0)
            remarks: Latest time at which a ward was reserved for the call out request.
# Table CAREGIVERS
        remarks: Record of when patients were ready for discharge (called out), and
          the actual time of their discharge (or more generally, their outcome).
- changeSet:
    id: 3
    author: lcp
    changes:
    - createTable:
        tableName: CAREGIVERS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: CGID
            type: INT
            constraints:
              nullable: false
            remarks: Unique caregiver identifier.
        - column:
            name: LABEL
            type: VARCHAR(15)
            remarks: Title of the caregiver, for example MD or RN.
        - column:
            name: DESCRIPTION
            type: VARCHAR(30)
            remarks: More detailed description of the caregiver, if available.
# Table CHARTEVENTS
        remarks: List of caregivers associated with an ICU stay.
- changeSet:
    id: 4
    author: lcp
    changes:
    - createTable:
        tableName: CHARTEVENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: ITEMID
            type: INT
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: CHARTTIME
            type: TIMESTAMP(0)
            remarks: Time when the event occured.
        - column:
            name: STORETIME
            type: TIMESTAMP(0)
            remarks: Time when the event was recorded in the system.
        - column:
            name: CGID
            type: INT
            remarks: Foreign key. Identifies the caregiver.
        - column:
            name: VALUE
            type: VARCHAR(255)
            remarks: Value of the event as a text string.
        - column:
            name: VALUENUM
            type: DOUBLE PRECISION
            remarks: Value of the event as a number.
        - column:
            name: VALUEUOM
            type: VARCHAR(50)
            remarks: Unit of measurement.
        - column:
            name: WARNING
            type: INT
            remarks: Flag to highlight that the value has triggered a warning.
        - column:
            name: ERROR
            type: INT
            remarks: Flag to highlight an error with the event.
        - column:
            name: RESULTSTATUS
            type: VARCHAR(50)
            remarks: Result status of lab data.
        - column:
            name: STOPPED
            type: VARCHAR(50)
            remarks: Text string indicating the stopped status of an event (i.e. stopped,
              not stopped).
          #   PARTITION for Table CHARTEVENTS
          # -- CREATE CHARTEVENTS TABLE
          # CREATE TABLE chartevents_1 ( CHECK ( itemid >= 1  AND itemid < 210 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_2 ( CHECK ( itemid >= 210  AND itemid < 250 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_3 ( CHECK ( itemid >= 250  AND itemid < 614 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_4 ( CHECK ( itemid >= 614  AND itemid < 640 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_5 ( CHECK ( itemid >= 640  AND itemid < 742 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_6 ( CHECK ( itemid >= 742  AND itemid < 1800 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_7 ( CHECK ( itemid >= 1800  AND itemid < 2700 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_8 ( CHECK ( itemid >= 2700  AND itemid < 3700 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_9 ( CHECK ( itemid >= 3700  AND itemid < 4700 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_10 ( CHECK ( itemid >= 4700  AND itemid < 6000 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_11 ( CHECK ( itemid >= 6000  AND itemid < 7000 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_12 ( CHECK ( itemid >= 7000  AND itemid < 8000 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_13 ( CHECK ( itemid >= 8000  AND itemid < 220074 )) INHERITS (chartevents);
          # CREATE TABLE chartevents_14 ( CHECK ( itemid >= 220074  AND itemid < 323769 )) INHERITS (chartevents);
          #
          # -- CREATE CHARTEVENTS TRIGGER
          # CREATE OR REPLACE FUNCTION chartevents_insert_trigger()
          # RETURNS TRIGGER AS $$
          # BEGIN
          # IF ( NEW.itemid >= 1 AND NEW.itemid < 210 ) THEN INSERT INTO chartevents_1 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 210 AND NEW.itemid < 250 ) THEN INSERT INTO chartevents_2 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 250 AND NEW.itemid < 614 ) THEN INSERT INTO chartevents_3 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 614 AND NEW.itemid < 640 ) THEN INSERT INTO chartevents_4 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 640 AND NEW.itemid < 742 ) THEN INSERT INTO chartevents_5 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 742 AND NEW.itemid < 1800 ) THEN INSERT INTO chartevents_6 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 1800 AND NEW.itemid < 2700 ) THEN INSERT INTO chartevents_7 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 2700 AND NEW.itemid < 3700 ) THEN INSERT INTO chartevents_8 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 3700 AND NEW.itemid < 4700 ) THEN INSERT INTO chartevents_9 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 4700 AND NEW.itemid < 6000 ) THEN INSERT INTO chartevents_10 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 6000 AND NEW.itemid < 7000 ) THEN INSERT INTO chartevents_11 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 7000 AND NEW.itemid < 8000 ) THEN INSERT INTO chartevents_12 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 8000 AND NEW.itemid < 220074 ) THEN INSERT INTO chartevents_13 VALUES (NEW.*);
          # ELSIF ( NEW.itemid >= 220074 AND NEW.itemid < 323769 ) THEN INSERT INTO chartevents_14 VALUES (NEW.*);
          # ELSE
          # 	INSERT INTO chartevents_null VALUES (NEW.*);
          # END IF;
          # RETURN NULL;
          # END;
          # $$
          # LANGUAGE plpgsql;
          #
          # CREATE TRIGGER insert_chartevents_trigger
          #     BEFORE INSERT ON chartevents
          #     FOR EACH ROW EXECUTE PROCEDURE chartevents_insert_trigger();
          #
# #Table CPTEVENTS
        remarks: Events occuring on a patient chart.
- changeSet:
    id: 5
    author: lcp
    changes:
    - createTable:
        tableName: CPTEVENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: COSTCENTER
            type: VARCHAR(10)
            constraints:
              nullable: false
            remarks: Center recording the code, for example the ICU or the respiratory
              unit.
        - column:
            name: CHARTDATE
            type: TIMESTAMP(0)
            remarks: Date when the event occured, if available.
        - column:
            name: CPT_CD
            type: VARCHAR(10)
            constraints:
              nullable: false
            remarks: Current Procedural Terminology code.
        - column:
            name: CPT_NUMBER
            type: INT
            remarks: Numerical element of the Current Procedural Terminology code.
        - column:
            name: CPT_SUFFIX
            type: VARCHAR(5)
            remarks: Text element of the Current Procedural Terminology, if any. Indicates
              code category.
        - column:
            name: TICKET_ID_SEQ
            type: INT
            remarks: Sequence number of the event, derived from the ticket ID.
        - column:
            name: SECTIONHEADER
            type: VARCHAR(50)
            remarks: High-level section of the Current Procedural Terminology code.
        - column:
            name: SUBSECTIONHEADER
            type: VARCHAR(255)
            remarks: Subsection of the Current Procedural Terminology code.
        - column:
            name: DESCRIPTION
            type: VARCHAR(200)
            remarks: Description of the Current Procedural Terminology, if available.
# Table DATETIMEEVENTS
        remarks: Events recorded in Current Procedural Terminology.
- changeSet:
    id: 6
    author: lcp
    changes:
    - createTable:
        tableName: DATETIMEEVENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: ITEMID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: CHARTTIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time when the event occured.
        - column:
            name: STORETIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time when the event was recorded in the system.
        - column:
            name: CGID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the caregiver.
        - column:
            name: VALUE
            type: TIMESTAMP(0)
            remarks: Value of the event as a text string.
        - column:
            name: VALUEUOM
            type: VARCHAR(50)
            constraints:
              nullable: false
            remarks: Unit of measurement.
        - column:
            name: WARNING
            type: SMALLINT
            remarks: Flag to highlight that the value has triggered a warning.
        - column:
            name: ERROR
            type: SMALLINT
            remarks: Flag to highlight an error with the event.
        - column:
            name: RESULTSTATUS
            type: VARCHAR(50)
            remarks: Result status of lab data.
        - column:
            name: STOPPED
            type: VARCHAR(50)
            remarks: Event was explicitly marked as stopped. Infrequently used by
              caregivers.
# Table DIAGNOSES_ICD
        remarks: Events relating to a datetime.
- changeSet:
    id: 7
    author: lcp
    changes:
    - createTable:
        tableName: DIAGNOSES_ICD
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: SEQ_NUM
            type: INT
            remarks: Priority of the code. Sequence 1 is the primary code.
        - column:
            name: ICD9_CODE
            type: VARCHAR(20)
            remarks: ICD9 code for the diagnosis.
# Table DRGCODES
        remarks: Diagnoses relating to a hospital admission coded using the ICD9 system.
- changeSet:
    id: 8
    author: lcp
    changes:
    - createTable:
        tableName: DRGCODES
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: DRG_TYPE
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: Type of Diagnosis-Related Group, for example APR is All Patient
              Refined
        - column:
            name: DRG_CODE
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: Diagnosis-Related Group code
        - column:
            name: DESCRIPTION
            type: VARCHAR(255)
            remarks: Description of the Diagnosis-Related Group
        - column:
            name: DRG_SEVERITY
            type: SMALLINT
            remarks: Relative severity, available for type APR only.
        - column:
            name: DRG_MORTALITY
            type: SMALLINT
            remarks: Relative mortality, available for type APR only.
# Table D_CPT
        remarks: Hospital stays classified using the Diagnosis-Related Group system.
- changeSet:
    id: 9
    author: lcp
    changes:
    - createTable:
        tableName: D_CPT
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: CATEGORY
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Code category.
        - column:
            name: SECTIONRANGE
            type: VARCHAR(100)
            constraints:
              nullable: false
            remarks: Range of codes within the high-level section.
        - column:
            name: SECTIONHEADER
            type: VARCHAR(50)
            constraints:
              nullable: false
            remarks: Section header.
        - column:
            name: SUBSECTIONRANGE
            type: VARCHAR(100)
            constraints:
              nullable: false
            remarks: Range of codes within the subsection.
        - column:
            name: SUBSECTIONHEADER
            type: VARCHAR(255)
            constraints:
              nullable: false
            remarks: Subsection header.
        - column:
            name: CODESUFFIX
            type: VARCHAR(5)
            remarks: Text element of the Current Procedural Terminology, if any.
        - column:
            name: MINCODEINSUBSECTION
            type: INT
            constraints:
              nullable: false
            remarks: Minimum code within the subsection.
        - column:
            name: MAXCODEINSUBSECTION
            type: INT
            constraints:
              nullable: false
            remarks: Maximum code within the subsection.
# Table D_ICD_DIAGNOSES
        remarks: High-level dictionary of the Current Procedural Terminology.
- changeSet:
    id: 10
    author: lcp
    changes:
    - createTable:
        tableName: D_ICD_DIAGNOSES
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: ICD9_CODE
            type: VARCHAR(10)
            constraints:
              nullable: false
            remarks: ICD9 code - note that this is a fixed length character field,
              as whitespaces are important in uniquely identifying ICD-9 codes.
        - column:
            name: SHORT_TITLE
            type: VARCHAR(50)
            constraints:
              nullable: false
            remarks: Short title associated with the code.
        - column:
            name: LONG_TITLE
            type: VARCHAR(255)
            constraints:
              nullable: false
            remarks: Long title associated with the code.
# Table D_ICD_PROCEDURES
        remarks: Dictionary of the International Classification of Diseases, 9th Revision
          (Diagnoses).
- changeSet:
    id: 11
    author: lcp
    changes:
    - createTable:
        tableName: D_ICD_PROCEDURES
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: ICD9_CODE
            type: VARCHAR(10)
            constraints:
              nullable: false
            remarks: ICD9 code - note that this is a fixed length character field,
              as whitespaces are important in uniquely identifying ICD-9 codes.
        - column:
            name: SHORT_TITLE
            type: VARCHAR(50)
            constraints:
              nullable: false
            remarks: Short title associated with the code.
        - column:
            name: LONG_TITLE
            type: VARCHAR(255)
            constraints:
              nullable: false
            remarks: Long title associated with the code.
# Table D_ITEMS
        remarks: Dictionary of the International Classification of Diseases, 9th Revision
          (Procedures).
- changeSet:
    id: 12
    author: lcp
    changes:
    - createTable:
        tableName: D_ITEMS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: ITEMID
            type: INT
            constraints:
              nullable: false
            remarks: Primary key. Identifies the charted item.
        - column:
            name: LABEL
            type: VARCHAR(200)
            remarks: Label identifying the item.
        - column:
            name: ABBREVIATION
            type: VARCHAR(100)
            remarks: Abbreviation associated with the item.
        - column:
            name: DBSOURCE
            type: VARCHAR(20)
            remarks: Source database of the item.
        - column:
            name: LINKSTO
            type: VARCHAR(50)
            remarks: Table which contains data for the given ITEMID.
        - column:
            name: CATEGORY
            type: VARCHAR(100)
            remarks: Category of data which the concept falls under.
        - column:
            name: UNITNAME
            type: VARCHAR(100)
            remarks: Unit associated with the item.
        - column:
            name: PARAM_TYPE
            type: VARCHAR(30)
            remarks: Type of item, for example solution or ingredient.
        - column:
            name: CONCEPTID
            type: INT
            remarks: Identifier used to harmonize concepts identified by multiple
              ITEMIDs. CONCEPTIDs are planned but not yet implemented (all values
              are NULL).
# Table D_LABITEMS
        remarks: Dictionary of non-laboratory-related charted items.
- changeSet:
    id: 13
    author: lcp
    changes:
    - createTable:
        tableName: D_LABITEMS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: ITEMID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: LABEL
            type: VARCHAR(100)
            constraints:
              nullable: false
            remarks: Label identifying the item.
        - column:
            name: FLUID
            type: VARCHAR(100)
            constraints:
              nullable: false
            remarks: Fluid associated with the item, for example blood or urine.
        - column:
            name: CATEGORY
            type: VARCHAR(100)
            constraints:
              nullable: false
            remarks: Category of item, for example chemistry or hematology.
        - column:
            name: LOINC_CODE
            type: VARCHAR(100)
            remarks: Logical Observation Identifiers Names and Codes (LOINC) mapped
              to the item, if available.
# Table ICUSTAYS
        remarks: Dictionary of laboratory-related items.
- changeSet:
    id: 14
    author: lcp
    changes:
    - createTable:
        tableName: ICUSTAYS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            constraints:
              nullable: false
            remarks: Primary key. Identifies the ICU stay.
        - column:
            name: DBSOURCE
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: Source database of the item.
        - column:
            name: FIRST_CAREUNIT
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: First careunit associated with the ICU stay.
        - column:
            name: LAST_CAREUNIT
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: Last careunit associated with the ICU stay.
        - column:
            name: FIRST_WARDID
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Identifier for the first ward the patient was located in.
        - column:
            name: LAST_WARDID
            type: SMALLINT
            constraints:
              nullable: false
            remarks: Identifier for the last ward the patient is located in.
        - column:
            name: INTIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time of admission to the ICU.
        - column:
            name: OUTTIME
            type: TIMESTAMP(0)
            remarks: Time of discharge from the ICU.
        - column:
            name: LOS
            type: DOUBLE PRECISION
            remarks: Length of stay in the ICU in minutes.
# Table INPUTEVENTS_CV
        remarks: List of ICU admissions.
- changeSet:
    id: 15
    author: lcp
    changes:
    - createTable:
        tableName: INPUTEVENTS_CV
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: CHARTTIME
            type: TIMESTAMP(0)
            remarks: Time of that the input was started or received.
        - column:
            name: ITEMID
            type: INT
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: AMOUNT
            type: DOUBLE PRECISION
            remarks: Amount of the item administered to the patient.
        - column:
            name: AMOUNTUOM
            type: VARCHAR(30)
            remarks: Unit of measurement for the amount.
        - column:
            name: RATE
            type: DOUBLE PRECISION
            remarks: Rate at which the item is being administered to the patient.
        - column:
            name: RATEUOM
            type: VARCHAR(30)
            remarks: Unit of measurement for the rate.
        - column:
            name: STORETIME
            type: TIMESTAMP(0)
            remarks: Time when the event was recorded in the system.
        - column:
            name: CGID
            type: INT
            remarks: Foreign key. Identifies the caregiver.
        - column:
            name: ORDERID
            type: INT
            remarks: Identifier linking items which are grouped in a solution.
        - column:
            name: LINKORDERID
            type: INT
            remarks: Identifier linking orders across multiple administrations. LINKORDERID
              is always equal to the first occuring ORDERID of the series.
        - column:
            name: STOPPED
            type: VARCHAR(30)
            remarks: Event was explicitly marked as stopped. Infrequently used by
              caregivers.
        - column:
            name: NEWBOTTLE
            type: INT
            remarks: Indicates when a new bottle of the solution was hung at the bedside.
        - column:
            name: ORIGINALAMOUNT
            type: DOUBLE PRECISION
            remarks: Amount of the item which was originally charted.
        - column:
            name: ORIGINALAMOUNTUOM
            type: VARCHAR(30)
            remarks: Unit of measurement for the original amount.
        - column:
            name: ORIGINALROUTE
            type: VARCHAR(30)
            remarks: Route of administration originally chosen for the item.
        - column:
            name: ORIGINALRATE
            type: DOUBLE PRECISION
            remarks: Rate of administration originally chosen for the item.
        - column:
            name: ORIGINALRATEUOM
            type: VARCHAR(30)
            remarks: Unit of measurement for the rate originally chosen.
        - column:
            name: ORIGINALSITE
            type: VARCHAR(30)
            remarks: Anatomical site for the original administration of the item.
# Table INPUTEVENTS_MV
        remarks: Events relating to fluid input for patients whose data was originally
          stored in the CareVue database.
- changeSet:
    id: 16
    author: lcp
    changes:
    - createTable:
        tableName: INPUTEVENTS_MV
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: STARTTIME
            type: TIMESTAMP(0)
            remarks: Time when the event started.
        - column:
            name: ENDTIME
            type: TIMESTAMP(0)
            remarks: Time when the event ended.
        - column:
            name: ITEMID
            type: INT
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: AMOUNT
            type: DOUBLE PRECISION
            remarks: Amount of the item administered to the patient.
        - column:
            name: AMOUNTUOM
            type: VARCHAR(30)
            remarks: Unit of measurement for the amount.
        - column:
            name: RATE
            type: DOUBLE PRECISION
            remarks: Rate at which the item is being administered to the patient.
        - column:
            name: RATEUOM
            type: VARCHAR(30)
            remarks: Unit of measurement for the rate.
        - column:
            name: STORETIME
            type: TIMESTAMP(0)
            remarks: Time when the event was recorded in the system.
        - column:
            name: CGID
            type: INT
            remarks: Foreign key. Identifies the caregiver.
        - column:
            name: ORDERID
            type: INT
            remarks: Identifier linking items which are grouped in a solution.
        - column:
            name: LINKORDERID
            type: INT
            remarks: Identifier linking orders across multiple administrations. LINKORDERID
              is always equal to the first occuring ORDERID of the series.
        - column:
            name: ORDERCATEGORYNAME
            type: VARCHAR(100)
            remarks: A group which the item corresponds to.
        - column:
            name: SECONDARYORDERCATEGORYNAME
            type: VARCHAR(100)
            remarks: A secondary group for those items with more than one grouping
              possible.
        - column:
            name: ORDERCOMPONENTTYPEDESCRIPTION
            type: VARCHAR(200)
            remarks: The role of the item administered in the order.
        - column:
            name: ORDERCATEGORYDESCRIPTION
            type: VARCHAR(50)
            remarks: The type of item administered.
        - column:
            name: PATIENTWEIGHT
            type: DOUBLE PRECISION
            remarks: For drugs dosed by weight, the value of the weight used in the
              calculation.
        - column:
            name: TOTALAMOUNT
            type: DOUBLE PRECISION
            remarks: The total amount in the solution for the given item.
        - column:
            name: TOTALAMOUNTUOM
            type: VARCHAR(50)
            remarks: Unit of measurement for the total amount in the solution.
        - column:
            name: ISOPENBAG
            type: SMALLINT
            remarks: Indicates whether the bag containing the solution is open.
        - column:
            name: CONTINUEINNEXTDEPT
            type: SMALLINT
            remarks: Indicates whether the item will be continued in the next department
              where the patient is transferred to.
        - column:
            name: CANCELREASON
            type: SMALLINT
            remarks: Reason for cancellation, if cancelled.
        - column:
            name: STATUSDESCRIPTION
            type: VARCHAR(30)
            remarks: 'The current status of the order: stopped, rewritten, running
              or cancelled.'
        - column:
            name: COMMENTS_EDITEDBY
            type: VARCHAR(30)
            remarks: The title of the caregiver who edited the order.
        - column:
            name: COMMENTS_CANCELEDBY
            type: VARCHAR(40)
            remarks: The title of the caregiver who canceled the order.
        - column:
            name: COMMENTS_DATE
            type: TIMESTAMP(0)
            remarks: Time at which the caregiver edited or cancelled the order.
        - column:
            name: ORIGINALAMOUNT
            type: DOUBLE PRECISION
            remarks: Amount of the item which was originally charted.
        - column:
            name: ORIGINALRATE
            type: DOUBLE PRECISION
            remarks: Rate of administration originally chosen for the item.
# Table LABEVENTS
        remarks: Events relating to fluid input for patients whose data was originally
          stored in the MetaVision database.
- changeSet:
    id: 17
    author: lcp
    changes:
    - createTable:
        tableName: LABEVENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ITEMID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: CHARTTIME
            type: TIMESTAMP(0)
            remarks: Time when the event occured.
        - column:
            name: VALUE
            type: VARCHAR(200)
            remarks: Value of the event as a text string.
        - column:
            name: VALUENUM
            type: DOUBLE PRECISION
            remarks: Value of the event as a number.
        - column:
            name: VALUEUOM
            type: VARCHAR(20)
            remarks: Unit of measurement.
        - column:
            name: FLAG
            type: VARCHAR(20)
            remarks: Flag indicating whether the lab test value is considered abnormal
              (null if the test was normal).
# Table MICROBIOLOGYEVENTS
        remarks: Events relating to laboratory tests.
- changeSet:
    id: 18
    author: lcp
    changes:
    - createTable:
        tableName: MICROBIOLOGYEVENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: CHARTDATE
            type: TIMESTAMP(0)
            remarks: Date when the event occured.
        - column:
            name: CHARTTIME
            type: TIMESTAMP(0)
            remarks: Time when the event occured, if available.
        - column:
            name: SPEC_ITEMID
            type: INT
            remarks: Foreign key. Identifies the specimen.
        - column:
            name: SPEC_TYPE_DESC
            type: VARCHAR(100)
            remarks: Description of the specimen.
        - column:
            name: ORG_ITEMID
            type: INT
            remarks: Foreign key. Identifies the organism.
        - column:
            name: ORG_NAME
            type: VARCHAR(100)
            remarks: Name of the organism.
        - column:
            name: ISOLATE_NUM
            type: SMALLINT
            remarks: Isolate number associated with the test.
        - column:
            name: AB_ITEMID
            type: INT
            remarks: Foreign key. Identifies the antibody.
        - column:
            name: AB_NAME
            type: VARCHAR(30)
            remarks: Name of the antibody used.
        - column:
            name: DILUTION_TEXT
            type: VARCHAR(10)
            remarks: The dilution amount tested for and the comparison which was made
              against it (e.g. <=4).
        - column:
            name: DILUTION_COMPARISON
            type: VARCHAR(20)
            remarks: 'The comparison component of DILUTION_TEXT: either <= (less than
              or equal), = (equal), or >= (greater than or equal), or null when not
              available.'
        - column:
            name: DILUTION_VALUE
            type: DOUBLE PRECISION
            remarks: 'The value component of DILUTION_TEXT: must be a floating point
              number.'
        - column:
            name: INTERPRETATION
            type: VARCHAR(5)
            remarks: Interpretation of the test.
# Table NOTEEVENTS
        remarks: Events relating to microbiology tests.
- changeSet:
    id: 19
    author: lcp
    changes:
    - createTable:
        tableName: NOTEEVENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: CHARTDATE
            type: TIMESTAMP(0)
            remarks: Date when the note was charted.
        - column:
            name: CHARTTIME
            type: TIMESTAMP(0)
            remarks: 'Date and time when the note was charted. Note that some notes
              (e.g. discharge summaries) do not have a time associated with them:
              these notes have NULL in this column.'
        - column:
            name: STORETIME
            type: TIMESTAMP(0)
            remarks: Time when the event was recorded in the system.
        - column:
            name: CATEGORY
            type: VARCHAR(50)
            remarks: Category of the note, e.g. Discharge summary.
        - column:
            name: DESCRIPTION
            type: VARCHAR(255)
            remarks: A more detailed categorization for the note, sometimes entered
              by free-text.
        - column:
            name: CGID
            type: INT
            remarks: Foreign key. Identifies the caregiver.
        - column:
            name: ISERROR
            type: CHAR(1)
            remarks: Flag to highlight an error with the note.
        - column:
            name: TEXT
            type: TEXT
            remarks: Content of the note.
# Table OUTPUTEVENTS
        remarks: Notes associated with hospital stays.
- changeSet:
    id: 20
    author: lcp
    changes:
    - createTable:
        tableName: OUTPUTEVENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Primary key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: CHARTTIME
            type: TIMESTAMP(0)
            remarks: Time when the event occured.
        - column:
            name: ITEMID
            type: INT
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: VALUE
            type: DOUBLE PRECISION
            remarks: Value of the event as a number.
        - column:
            name: VALUEUOM
            type: VARCHAR(30)
            remarks: Unit of measurement.
        - column:
            name: STORETIME
            type: TIMESTAMP(0)
            remarks: Time when the event was recorded in the system.
        - column:
            name: CGID
            type: INT
            remarks: Unique caregiver identifier.
        - column:
            name: STOPPED
            type: VARCHAR(30)
            remarks: Event was explicitly marked as stopped. Infrequently used by
              caregivers.
        - column:
            name: NEWBOTTLE
            type: CHAR(1)
            remarks: Indicates when a new bottle of the solution was hung at the bedside.
        - column:
            name: ISERROR
            type: INT
            remarks: Indicates when a caregiver observed an error with this event.
# Table PATIENTS
        remarks: Events relating to substance output for patients.
- changeSet:
    id: 21
    author: lcp
    changes:
    - createTable:
        tableName: PATIENTS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Primary key. Identifies the patient.
        - column:
            name: GENDER
            type: VARCHAR(5)
            constraints:
              nullable: false
            remarks: Gender.
        - column:
            name: DOB
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Date of birth.
        - column:
            name: DOD
            type: TIMESTAMP(0)
            remarks: Date of death. Null if the patient was alive at least 90 days
              post hospital discharge.
        - column:
            name: DOD_HOSP
            type: TIMESTAMP(0)
            remarks: Date of death recorded in the hospital records.
        - column:
            name: DOD_SSN
            type: TIMESTAMP(0)
            remarks: Date of death recorded in the social security records.
        - column:
            name: EXPIRE_FLAG
            type: INT
            constraints:
              nullable: false
            remarks: Flag indicating that the patient has died.
# Table PRESCRIPTIONS
        remarks: Patients associated with an admission to the ICU.
- changeSet:
    id: 22
    author: lcp
    changes:
    - createTable:
        tableName: PRESCRIPTIONS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: STARTDATE
            type: TIMESTAMP(0)
            remarks: Date when the prescription started.
        - column:
            name: ENDDATE
            type: TIMESTAMP(0)
            remarks: Date when the prescription ended.
        - column:
            name: DRUG_TYPE
            type: VARCHAR(100)
            constraints:
              nullable: false
            remarks: Type of drug.
        - column:
            name: DRUG
            type: VARCHAR(100)
            constraints:
              nullable: false
            remarks: Name of the drug.
        - column:
            name: DRUG_NAME_POE
            type: VARCHAR(100)
            remarks: Name of the drug on the Provider Order Entry interface.
        - column:
            name: DRUG_NAME_GENERIC
            type: VARCHAR(100)
            remarks: Generic drug name.
        - column:
            name: FORMULARY_DRUG_CD
            type: VARCHAR(120)
            remarks: Formulary drug code.
        - column:
            name: GSN
            type: VARCHAR(200)
            remarks: Generic Sequence Number.
        - column:
            name: NDC
            type: VARCHAR(120)
            remarks: National Drug Code.
        - column:
            name: PROD_STRENGTH
            type: VARCHAR(120)
            remarks: Strength of the drug (product).
        - column:
            name: DOSE_VAL_RX
            type: VARCHAR(120)
            remarks: Dose of the drug prescribed.
        - column:
            name: DOSE_UNIT_RX
            type: VARCHAR(120)
            remarks: Unit of measurement associated with the dose.
        - column:
            name: FORM_VAL_DISP
            type: VARCHAR(120)
            remarks: Amount of the formulation dispensed.
        - column:
            name: FORM_UNIT_DISP
            type: VARCHAR(120)
            remarks: Unit of measurement associated with the formulation.
        - column:
            name: ROUTE
            type: VARCHAR(120)
            remarks: Route of administration, for example intravenous or oral.
# Table PROCEDUREEVENTS_MV
        remarks: Medicines prescribed.
- changeSet:
    id: 23
    author: lcp
    changes:
    - createTable:
        tableName: PROCEDUREEVENTS_MV
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: STARTTIME
            type: TIMESTAMP(0)
            remarks: Date when the procedure started.
        - column:
            name: ENDTIME
            type: TIMESTAMP(0)
            remarks: Date when the procedure ended.
        - column:
            name: ITEMID
            type: INT
            remarks: Foreign key. Identifies the charted item.
        - column:
            name: VALUE
            type: DOUBLE PRECISION
            remarks: Value of the event as a number.
        - column:
            name: VALUEUOM
            type: VARCHAR(30)
            remarks: Unit of measurement.
        - column:
            name: LOCATION
            type: VARCHAR(30)
            remarks: ''
        - column:
            name: LOCATIONCATEGORY
            type: VARCHAR(30)
            remarks: ''
        - column:
            name: STORETIME
            type: TIMESTAMP(0)
            remarks: Time when the event was recorded in the system.
        - column:
            name: CGID
            type: INT
            remarks: Unique caregiver identifier.
        - column:
            name: ORDERID
            type: INT
            remarks: Identifier linking items which are grouped in a solution.
        - column:
            name: LINKORDERID
            type: INT
            remarks: Identifier linking orders across multiple administrations. LINKORDERID
              is always equal to the first occuring ORDERID of the series.
        - column:
            name: ORDERCATEGORYNAME
            type: VARCHAR(100)
            remarks: A group which the item corresponds to.
        - column:
            name: SECONDARYORDERCATEGORYNAME
            type: VARCHAR(100)
            remarks: A secondary group for those items with more than one grouping
              possible.
        - column:
            name: ORDERCATEGORYDESCRIPTION
            type: VARCHAR(50)
            remarks: The type of item administered.
        - column:
            name: ISOPENBAG
            type: SMALLINT
            remarks: Indicates whether the bag containing the solution is open.
        - column:
            name: CONTINUEINNEXTDEPT
            type: SMALLINT
            remarks: Indicates whether the item will be continued in the next department
              where the patient is transferred to.
        - column:
            name: CANCELREASON
            type: SMALLINT
            remarks: Reason for cancellation, if cancelled.
        - column:
            name: STATUSDESCRIPTION
            type: VARCHAR(30)
            remarks: 'The current status of the order: stopped, rewritten, running
              or cancelled.'
        - column:
            name: COMMENTS_EDITEDBY
            type: VARCHAR(30)
            remarks: The title of the caregiver who edited the order.
        - column:
            name: COMMENTS_CANCELEDBY
            type: VARCHAR(30)
            remarks: The title of the caregiver who canceled the order.
        - column:
            name: COMMENTS_DATE
            type: TIMESTAMP(0)
            remarks: Time at which the caregiver edited or cancelled the order.
# Table PROCEDURES_ICD
        remarks: ''
- changeSet:
    id: 24
    author: lcp
    changes:
    - createTable:
        tableName: PROCEDURES_ICD
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: SEQ_NUM
            type: INT
            constraints:
              nullable: false
            remarks: Lower procedure numbers occurred earlier.
        - column:
            name: ICD9_CODE
            type: VARCHAR(20)
            constraints:
              nullable: false
            remarks: ICD9 code associated with the procedure.
# Table SERVICES
        remarks: Procedures relating to a hospital admission coded using the ICD9
          system.
- changeSet:
    id: 25
    author: lcp
    changes:
    - createTable:
        tableName: SERVICES
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: TRANSFERTIME
            type: TIMESTAMP(0)
            constraints:
              nullable: false
            remarks: Time when the transfer occured.
        - column:
            name: PREV_SERVICE
            type: VARCHAR(20)
            remarks: Previous service type.
        - column:
            name: CURR_SERVICE
            type: VARCHAR(20)
            remarks: Current service type.
# Table TRANSFERS
        remarks: Hospital services that patients were under during their hospital
          stay.
- changeSet:
    id: 26
    author: lcp
    changes:
    - createTable:
        tableName: TRANSFERS
        columns:
        - column:
            name: ROW_ID
            type: INT
            constraints:
              nullable: false
            remarks: Unique row identifier.
        - column:
            name: SUBJECT_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the patient.
        - column:
            name: HADM_ID
            type: INT
            constraints:
              nullable: false
            remarks: Foreign key. Identifies the hospital stay.
        - column:
            name: ICUSTAY_ID
            type: INT
            remarks: Foreign key. Identifies the ICU stay.
        - column:
            name: DBSOURCE
            type: VARCHAR(20)
            remarks: Source database of the item.
        - column:
            name: EVENTTYPE
            type: VARCHAR(20)
            remarks: Type of event, for example admission or transfer.
        - column:
            name: PREV_CAREUNIT
            type: VARCHAR(20)
            remarks: Previous careunit.
        - column:
            name: CURR_CAREUNIT
            type: VARCHAR(20)
            remarks: Current careunit.
        - column:
            name: PREV_WARDID
            type: SMALLINT
            remarks: Identifier for the previous ward the patient was located in.
        - column:
            name: CURR_WARDID
            type: SMALLINT
            remarks: Identifier for the current ward the patient is located in.
        - column:
            name: INTIME
            type: TIMESTAMP(0)
            remarks: Time when the patient was transferred into the unit.
        - column:
            name: OUTTIME
            type: TIMESTAMP(0)
            remarks: Time when the patient was transferred out of the unit.
        - column:
            name: LOS
            type: DOUBLE PRECISION
            remarks: Length of stay in the unit in minutes.
# ---------------------------- #
# Primary keys and constraints #
# ---------------------------- #
        remarks: Location of patients during their hospital stay.
- changeSet:
    id: add-admissions-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: adm_rowid_pk
        tableName: admissions
    - addUniqueConstraint:
        columnNames: HADM_ID
        constraintName: adm_hadm_unique
        tableName: admissions
- changeSet:
    id: add-callout-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: callout_rowid_pk
        tableName: callout
- changeSet:
    id: add-caregivers-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: cg_rowid_pk
        tableName: caregivers
    - addUniqueConstraint:
        columnNames: CGID
        constraintName: cg_cgid_unique
        tableName: caregivers
- changeSet:
    id: add-chartevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: chartevents_rowid_pk
        tableName: chartevents
- changeSet:
    id: add-cptevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: cpt_rowid_pk
        tableName: cptevents
- changeSet:
    id: add-datetimeevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: datetime_rowid_pk
        tableName: datetimeevents
- changeSet:
    id: add-diagnoses_icd-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: diagnosesicd_rowid_pk
        tableName: diagnoses_icd
- changeSet:
    id: add-drgcodes-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: drg_rowid_pk
        tableName: drgcodes
- changeSet:
    id: add-d_cpt-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: dcpt_rowid_pk
        tableName: d_cpt
    - addUniqueConstraint:
        columnNames: SUBSECTIONRANGE
        constraintName: dcpt_ssrange_unique
        tableName: d_cpt
- changeSet:
    id: add-d_icd_diagnoses-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: d_icd_diag_rowid_pk
        tableName: d_icd_diagnoses
    - addUniqueConstraint:
        columnNames: ICD9_CODE
        constraintName: d_icd_diag_code_unique
        tableName: d_icd_diagnoses
- changeSet:
    id: add-d_icd_procedures-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: d_icd_proc_rowid_pk
        tableName: d_icd_procedures
    - addUniqueConstraint:
        columnNames: ICD9_CODE
        constraintName: d_icd_proc_code_unique
        tableName: d_icd_procedures
- changeSet:
    id: add-d_items-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: ditems_rowid_pk
        tableName: d_items
    - addUniqueConstraint:
        columnNames: ITEMID
        constraintName: ditems_itemid_unique
        tableName: d_items
- changeSet:
    id: add-d_labitems-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: dlabitems_rowid_pk
        tableName: d_labitems
    - addUniqueConstraint:
        columnNames: ITEMID
        constraintName: dlabitems_itemid_unique
        tableName: d_labitems
- changeSet:
    id: add-icustays-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: icustay_rowid_pk
        tableName: icustays
    - addUniqueConstraint:
        columnNames: ICUSTAY_ID
        constraintName: icustay_icustayid_unique
        tableName: icustays
- changeSet:
    id: add-inputevents_cv-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: inputevents_cv_rowid_pk
        tableName: inputevents_cv
- changeSet:
    id: add-inputevents_mv-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: inputevents_mv_rowid_pk
        tableName: inputevents_mv
- changeSet:
    id: add-labevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: labevents_rowid_pk
        tableName: labevents
- changeSet:
    id: add-microbiologyevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: micro_rowid_pk
        tableName: microbiologyevents
- changeSet:
    id: add-noteevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: noteevents_rowid_pk
        tableName: noteevents
- changeSet:
    id: add-outputevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: outputevents_cv_rowid_pk
        tableName: outputevents
- changeSet:
    id: add-patients-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: pat_rowid_pk
        tableName: patients
    - addUniqueConstraint:
        columnNames: SUBJECT_ID
        constraintName: pat_subid_unique
        tableName: patients
- changeSet:
    id: add-prescriptions-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: prescription_rowid_pk
        tableName: prescriptions
- changeSet:
    id: add-procedureevents-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: procedureevents_mv_rowid_pk
        tableName: procedureevents
- changeSet:
    id: add-procedures_icd-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: proceduresicd_rowid_pk
        tableName: procedures_icd
- changeSet:
    id: add-services-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: services_rowid_pk
        tableName: services
- changeSet:
    id: add-transfers-constraints
    author: lcp
    changes:
    - addPrimaryKey:
        columnNames: ROW_ID
        constraintName: transfers_rowid_pk
        tableName: transfers
# --------------------------------- #
#              Indexes              #
# --------------------------------- #
- changeSet:
    id: createIndex-ADMISSIONS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: ADMISSIONS_IDX01
        tableName: ADMISSIONS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: ADMISSIONS_IDX02
        tableName: ADMISSIONS
        unique: false
- changeSet:
    id: createIndex-CALLOUT
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: CALLOUT_IDX01
        tableName: CALLOUT
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: CALLOUT_IDX02
        tableName: CALLOUT
        unique: false
# TODO: chartevents
- changeSet:
    id: createIndex-CPTEVENTS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: CPTEVENTS_idx01
        tableName: CPTEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: CPT_CD
            type: varchar(10)
        indexName: CPTEVENTS_idx02
        tableName: CPTEVENTS
        unique: false
- changeSet:
    id: createIndex-D_ICD_DIAG
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: ICD9_CODE
            type: varchar(10)
        indexName: D_ICD_DIAG_idx01
        tableName: D_ICD_DIAGNOSES
        unique: false
    - createIndex:
        columns:
        - column:
            name: LONG_TITLE
            type: varchar(255)
        indexName: D_ICD_DIAG_idx02
        tableName: D_ICD_DIAGNOSES
        unique: false
- changeSet:
    id: createIndex-D_ICD_PROC
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: ICD9_CODE
            type: varchar(10)
        indexName: D_ICD_PROC_idx01
        tableName: D_ICD_PROCEDURES
        unique: false
    - createIndex:
        columns:
        - column:
            name: LONG_TITLE
            type: varchar(255)
        indexName: D_ICD_PROC_idx02
        tableName: D_ICD_PROCEDURES
        unique: false
- changeSet:
    id: createIndex-D_ITEMS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: D_ITEMS_idx01
        tableName: D_ITEMS
        unique: false
    - createIndex:
        columns:
        - column:
            name: LABEL
            type: varchar(100)
        indexName: D_ITEMS_idx02
        tableName: D_ITEMS
        unique: false
- changeSet:
    id: createIndex-D_LABITEMS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: D_LABITEMS_idx01
        tableName: D_LABITEMS
        unique: false
    - createIndex:
        columns:
        - column:
            name: LABEL
            type: varchar(100)
        indexName: D_LABITEMS_idx02
        tableName: D_LABITEMS
        unique: false
    - createIndex:
        columns:
        - column:
            name: LOINC_CODE
            type: ???
        indexName: D_LABITEMS_idx03
        tableName: D_LABITEMS
        unique: false
- changeSet:
    id: createIndex-DATETIMEEVENTS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: DATETIMEEVENTS_idx01
        tableName: DATETIMEEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: DATETIMEEVENTS_idx02
        tableName: DATETIMEEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: DATETIMEEVENTS_idx03
        tableName: DATETIMEEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: DATETIMEEVENTS_idx04
        tableName: DATETIMEEVENTS
        unique: false
- changeSet:
    id: createIndex-DIAGNOSES_ICD
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: DIAGNOSES_ICD_idx01
        tableName: DIAGNOSES_ICD
        unique: false
    - createIndex:
        columns:
        - column:
            name: ICD9_CODE
            type: varchar(10)
        indexName: DIAGNOSES_ICD_idx02
        tableName: DIAGNOSES_ICD
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: DIAGNOSES_ICD_idx03
        tableName: DIAGNOSES_ICD
        unique: false
- changeSet:
    id: createIndex-DRGCODES
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: DRGCODES_idx01
        tableName: DRGCODES
        unique: false
    - createIndex:
        columns:
        - column:
            name: DRG_CODE
            type: varchar(20)
        indexName: DRGCODES_idx02
        tableName: DRGCODES
        unique: false
    - createIndex:
        columns:
        - column:
            name: DESCRIPTION
            type: varchar(255)
        indexName: DRGCODES_idx03
        tableName: DRGCODES
        unique: false
- changeSet:
    id: createIndex-ICUSTAYS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: ICUSTAYS_idx01
        tableName: ICUSTAYS
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: ICUSTAYS_idx02
        tableName: ICUSTAYS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: ICUSTAYS_idx03
        tableName: ICUSTAYS
        unique: false
- changeSet:
    id: createIndex-INPUTEVENTS_CV
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: INPUTEVENTS_CV_idx01
        tableName: INPUTEVENTS_CV
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: INPUTEVENTS_CV_idx02
        tableName: INPUTEVENTS_CV
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: INPUTEVENTS_CV_idx03
        tableName: INPUTEVENTS_CV
        unique: false
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: INPUTEVENTS_CV_idx04
        tableName: INPUTEVENTS_CV
        unique: false
- changeSet:
    id: createIndex-INPUTEVENTS_MV
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: INPUTEVENTS_MV_idx01
        tableName: INPUTEVENTS_MV
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: INPUTEVENTS_MV_idx02
        tableName: INPUTEVENTS_MV
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: INPUTEVENTS_MV_idx03
        tableName: INPUTEVENTS_MV
        unique: false
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: INPUTEVENTS_MV_idx04
        tableName: INPUTEVENTS_MV
        unique: false
- changeSet:
    id: createIndex-LABEVENTS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: LABEVENTS_idx01
        tableName: LABEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: LABEVENTS_idx02
        tableName: LABEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: LABEVENTS_idx03
        tableName: LABEVENTS
        unique: false
- changeSet:
    id: createIndex-MICROBIOLOGYEVENTS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: MICROBIOLOGYEVENTS_idx01
        tableName: MICROBIOLOGYEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: MICROBIOLOGYEVENTS_idx02
        tableName: MICROBIOLOGYEVENTS
        unique: false
- changeSet:
    id: createIndex-NOTEEVENTS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: NOTEEVENTS_idx01
        tableName: NOTEEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: NOTEEVENTS_idx02
        tableName: NOTEEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: CATEGORY
            type: varchar(50)
        indexName: NOTEEVENTS_idx03
        tableName: NOTEEVENTS
        unique: false
- changeSet:
    id: createIndex-OUTPUTEVENTS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: OUTPUTEVENTS_idx01
        tableName: OUTPUTEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: OUTPUTEVENTS_idx02
        tableName: OUTPUTEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: OUTPUTEVENTS_idx03
        tableName: OUTPUTEVENTS
        unique: false
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: OUTPUTEVENTS_idx04
        tableName: OUTPUTEVENTS
        unique: false
- changeSet:
    id: createIndex-PRESCRIPTIONS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: PRESCRIPTIONS_idx01
        tableName: PRESCRIPTIONS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: PRESCRIPTIONS_idx02
        tableName: PRESCRIPTIONS
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: PRESCRIPTIONS_idx03
        tableName: PRESCRIPTIONS
        unique: false
    - createIndex:
        columns:
        - column:
            name: DRUG_TYPE
            type: varchar(100)
        indexName: PRESCRIPTIONS_idx04
        tableName: PRESCRIPTIONS
        unique: false
    - createIndex:
        columns:
        - column:
            name: DRUG
            type: varchar(100)
        indexName: PRESCRIPTIONS_idx05
        tableName: PRESCRIPTIONS
        unique: false
- changeSet:
    id: createIndex-PROCEDUREEVENTS_MV
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: PROCEDUREEVENTS_MV_idx01
        tableName: PROCEDUREEVENTS_MV
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: PROCEDUREEVENTS_MV_idx02
        tableName: PROCEDUREEVENTS_MV
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: PROCEDUREEVENTS_MV_idx03
        tableName: PROCEDUREEVENTS_MV
        unique: false
    - createIndex:
        columns:
        - column:
            name: itemid
            type: int
        indexName: PROCEDUREEVENTS_MV_idx04
        tableName: PROCEDUREEVENTS_MV
        unique: false
- changeSet:
    id: createIndex-PROCEDURES_ICD
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: PROCEDURES_ICD_idx01
        tableName: PROCEDURES_ICD
        unique: false
    - createIndex:
        columns:
        - column:
            name: ICD9_CODE
            type: varchar(10)
        indexName: PROCEDURES_ICD_idx02
        tableName: PROCEDURES_ICD
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: PROCEDURES_ICD_idx03
        tableName: PROCEDURES_ICD
        unique: false
- changeSet:
    id: createIndex-SERVICES
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: SERVICES_idx01
        tableName: SERVICES
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: SERVICES_idx02
        tableName: SERVICES
        unique: false
- changeSet:
    id: createIndex-TRANSFERS
    author: lcp
    changes:
    - createIndex:
        columns:
        - column:
            name: subject_id
            type: int
        indexName: TRANSFERS_idx01
        tableName: TRANSFERS
        unique: false
    - createIndex:
        columns:
        - column:
            name: hadm_id
            type: int
        indexName: TRANSFERS_idx02
        tableName: TRANSFERS
        unique: false
    - createIndex:
        columns:
        - column:
            name: icustay_id
            type: int
        indexName: TRANSFERS_idx03
        tableName: TRANSFERS
        unique: false
# ---------------------------------- #
#              Comments              #
# ---------------------------------- #
# -------------------------------- #
#              Checks              #
# -------------------------------- #
